(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9189],{2833:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return a(4630)}])},7252:function(e,t,a){"use strict";var s=a(5893),r=(a(7294),a(1664)),n=a.n(r);t.Z=function(e){var t=e.pageTitle,a=e.homePageUrl,r=e.homePageText,i=e.activePageText;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"page-title-area",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row align-items-center",children:[(0,s.jsx)("div",{className:"col-lg-6 col-md-7",children:(0,s.jsx)("h2",{children:t})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-5",children:(0,s.jsxs)("ul",{className:"page-title-content",children:[(0,s.jsx)("li",{children:(0,s.jsx)(n(),{href:a,children:(0,s.jsx)("a",{children:r})})}),(0,s.jsx)("li",{children:i})]})})]})})})})}},4630:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var s=a(7568),r=a(655),n=a(5893),i=a(8871),c=a(5245),l=a(7252),o=a(7294),d=a(9669),u=a.n(d),h=a(7105),m=a(5297),x=a(4924),p=a(6042),j=a(9396),g=a(2286),f=a(72),v=a(682),N=a(4051),b=a(5005),_=a(6968),y=a(279),P=function(e){var t=e.show,a=e.handleClose,i=e.product,c=e.eProduct,l=(0,g.parseCookies)().luan_token,d=(0,o.useState)(""),m=(d[0],d[1]),P=(0,o.useState)(!1),Z=P[0],w=P[1],C=(0,o.useState)({id:"",title:"",price:"",img_url:"",short_description:"",long_description:"",additional_info:"",sku:"",availability:"",category:"",tag:""}),k=C[0],S=C[1];(0,o.useEffect)((function(){S({id:i.id,title:i.title,price:i.price,img_url:i.img_url,short_description:i.short_description,long_description:i.long_description,additional_info:i.additional_info,sku:i.sku,availability:i.availability,category:i.category,tag:i.tag})}),[i]);var T=function(e){var t=e.target,a=t.name,s=t.value,r=t.files;if("media"===a){if(r[0].size/860/1090>2)return void(e.target.value=null);S((function(e){return(0,j.Z)((0,p.Z)({},e),{img_url:r[0]})}))}else S((function(e){return(0,j.Z)((0,p.Z)({},e),(0,x.Z)({},a,s))}))},D=function(){var e=(0,s.Z)((function(){var e,t;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return(e=new FormData).append("file",k.img_url),e.append("upload_preset","..."),e.append("cloudinary_name","..."),[4,u().post("...",e)];case 1:return t=a.sent(),[2,t.data.url]}}))}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.Z)((function(e){var t,a,s,n,i,o,d,x,p,j,g,f,v,N,b,_,P,Z,C;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,5,6,7]),w(!0),m(""),t="",k.img_url?[4,D()]:[3,3];case 2:a=r.sent(),t=a.replace(/^http:\/\//i,"https://"),r.label=3;case 3:return s=k.id,n=k.title,i=k.price,o=k.short_description,d=k.long_description,x=k.additional_info,p=k.sku,j=k.availability,g=k.category,f=k.tag,v=k.img_url,N="".concat(h.Z,"/api/v1/products/").concat(s),(_={}).title=n,_.price=i,_.short_description=o,_.long_description=d,_.additional_info=x,_.sku=p,_.availability=j,_.category=g,_.tag=f,_.img_url=t||v,b=_,Z={},[4,u().put(N,b,(Z.headers={Authorization:l},Z))];case 4:return P=r.sent(),c(P.data.products),w(!1),router.replace("/admin/dashboard"),[3,7];case 5:return C=r.sent(),console.log(C),(0,y.Z)(C,m),[3,7];case 6:return w(!1),[7];case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.Z,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:t,onHide:a,className:"product-update-modal",children:[(0,n.jsx)(f.Z.Header,{closeButton:!0,className:"close-button",children:(0,n.jsx)(f.Z.Title,{children:"Update Product"})}),(0,n.jsx)(f.Z.Body,{className:"p-3",children:(0,n.jsx)(v.Z,{children:(0,n.jsx)(N.Z,{children:(0,n.jsx)("div",{className:"product-update-form",children:(0,n.jsx)("form",{onSubmit:E,children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Name"}),(0,n.jsx)("input",{className:"form-control",type:"text",name:"title",placeholder:"title",value:k.title||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Short Description"}),(0,n.jsx)("textarea",{type:"text",className:"form-control",name:"short_description",value:k.short_description||"",onChange:T,rows:"4"})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Price"}),(0,n.jsx)("input",{className:"form-control",type:"text",name:"price",placeholder:"Price",value:k.price||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Status"}),(0,n.jsx)("input",{className:"form-control",placeholder:"In Stock",name:"availability",type:"text",value:k.availability||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"SKU"}),(0,n.jsx)("input",{className:"form-control",placeholder:"SKU",name:"sku",type:"text",value:k.sku||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Category"}),(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"Category",name:"category",value:k.category||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Tag"}),(0,n.jsx)("input",{type:"text",className:"form-control",placeholder:"Product Tag",name:"tag",value:k.tag||"",onChange:T})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Full Details of The Product"}),(0,n.jsx)("textarea",{type:"text",className:"form-control",name:"long_description",value:k.long_description||"",onChange:T,rows:"6"})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Additional Information"}),(0,n.jsx)("textarea",{type:"text",className:"form-control",name:"additional_info",value:k.additional_info||"",onChange:T,rows:"6"})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Image"}),(0,n.jsx)("input",{type:"file",name:"media",className:"form-control height-auto",onChange:T}),(0,n.jsx)("small",{className:"text-muted mt-2 d-block",children:"Recommend image size 860x1090!"})]})}),(0,n.jsx)("div",{className:"col-md-12 col-sm-12",children:(0,n.jsxs)("button",{className:"default-btn product-submit-button",type:"submit",onClick:function(){window.setTimeout((function(){location.reload()}),3e3)},children:[(0,n.jsx)("i",{className:"far fa-edit"})," Update Product",Z?(0,n.jsx)(_.Z,{color:"success",className:"ms-2",animation:"border",size:"sm"}):""]})})]})})})})})}),(0,n.jsx)(f.Z.Footer,{children:(0,n.jsx)(b.Z,{variant:"secondary",size:"sm",onClick:a,children:"Close"})})]})})},Z=a(1664),w=a.n(Z),C=a(1163),k=function(e){var t=e.products,a=(e.totalPages,(0,o.useState)(!1)),i=a[0],c=a[1],l=(0,C.useRouter)(),d=(0,o.useState)(""),x=d[0],p=d[1],j=(0,o.useState)(""),g=j[0],f=j[1],v=parseInt(l.query.page)?parseInt(l.query.page):1;(0,o.useEffect)((function(){p(t)}),[v]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"dashboard-area ptb-100",children:[(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"dashboard-table",children:[(0,n.jsx)("div",{className:"title",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)("h3",{children:"All Products"})}),(0,n.jsx)("div",{className:"col-6 text-end",children:(0,n.jsx)(w(),{href:"/product/create/",children:(0,n.jsx)("a",{className:"btn btn-dark btn-sm mb-2",children:"Create Product"})})})]})}),(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-striped align-middle table-hover fs-15",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Image"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"Price"}),(0,n.jsx)("th",{children:"Category"}),(0,n.jsx)("th",{children:"In Stock"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:x.length>0?x.map((function(e){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"table-img",children:(0,n.jsx)(w(),{href:"/product/".concat(e.id),children:(0,n.jsx)("a",{className:"d-block",children:(0,n.jsx)("img",{src:e.img_url,alt:"image",width:"40"})})})}),(0,n.jsx)("td",{children:(0,n.jsx)(w(),{href:"/product/".concat(e.id),children:(0,n.jsx)("a",{children:e.title})})}),(0,n.jsx)("td",{children:(0,m.Z)(e.createdAt)}),(0,n.jsxs)("td",{children:["$",e.price]}),(0,n.jsx)("td",{children:e.category}),(0,n.jsx)("td",{children:e.availability}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"btn btn-danger btn-sm fs-12",onClick:function(){return function(e){var t="".concat(h.Z,"/api/v1/products/").concat(e),a=function(){var e=(0,s.Z)((function(){var e;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return[4,u().delete(t)];case 1:return e=a.sent(),p(e.data.products),[2]}}))}));return function(){return e.apply(this,arguments)}}();a()}(e.id)},children:"Delete"})," "," ",(0,n.jsx)("button",{className:"btn btn-primary btn-sm fs-12",onClick:function(){return f(e),void c(!0)},children:"Edit"})," "," ",(0,n.jsx)(w(),{href:"/product/".concat(e.id),children:(0,n.jsx)("a",{className:"btn btn-secondary btn-sm fs-12",target:"_blank",children:"View"})})]})]},e.id)})):(0,n.jsx)("tr",{className:"empty-tr",children:(0,n.jsx)("td",{colSpan:"7",children:"No Product!"})})})]})})]})}),(0,n.jsx)(P,{show:i,handleClose:function(){return c(!1)},product:g,eProduct:function(e){p(e)}})]})})},S=function(e){var t=e.products,a=e.totalPages,s=e.user;return console.log("dash",t),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{user:s}),(0,n.jsx)(l.Z,{pageTitle:"Dashboard",homePageUrl:"/",homePageText:"Home",activePageText:"Dashboard"}),(0,n.jsx)(k,{products:t,totalPages:a}),(0,n.jsx)(c.Z,{})]})};S.getInitialProps=function(){var e=(0,s.Z)((function(e){var t,a,s,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=e.query.page?e.query.page:"1",(s={}).params={page:t,limit:100},a=s,n="".concat(h.Z,"/api/v1/products"),[4,u().get(n,a)];case 1:return[2,r.sent().data]}}))}));return function(t){return e.apply(this,arguments)}}();var T=S},279:function(e,t){"use strict";t.Z=function(e,t){var a;e.response?(a=e.response.data,e.response.data.error&&(a=e.response.data.error.message)):e.request&&(a=e.request),t(a)}},5297:function(e,t){"use strict";t.Z=function(e){return new Date(e).toLocaleDateString("en-US")}}},function(e){e.O(0,[162,7671,9274,2244,9774,2888,179],(function(){return t=2833,e(e.s=t);var t}));var t=e.O();_N_E=t}]);